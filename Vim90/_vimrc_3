" 2023/7/30, version 3, on win11



" Vim with all enhancements
source $VIMRUNTIME/vimrc_example.vim

" Use the internal diff if available.
" Otherwise use the special 'diffexpr' for Windows.
if &diffopt !~# 'internal'
  set diffexpr=MyDiff()
endif
function MyDiff()
  let opt = '-a --binary '
  if &diffopt =~ 'icase' | let opt = opt . '-i ' | endif
  if &diffopt =~ 'iwhite' | let opt = opt . '-b ' | endif
  let arg1 = v:fname_in
  if arg1 =~ ' ' | let arg1 = '"' . arg1 . '"' | endif
  let arg1 = substitute(arg1, '!', '\!', 'g')
  let arg2 = v:fname_new
  if arg2 =~ ' ' | let arg2 = '"' . arg2 . '"' | endif
  let arg2 = substitute(arg2, '!', '\!', 'g')
  let arg3 = v:fname_out
  if arg3 =~ ' ' | let arg3 = '"' . arg3 . '"' | endif
  let arg3 = substitute(arg3, '!', '\!', 'g')
  if $VIMRUNTIME =~ ' '
    if &sh =~ '\<cmd'
      if empty(&shellxquote)
        let l:shxq_sav = ''
        set shellxquote&
      endif
      let cmd = '"' . $VIMRUNTIME . '\diff"'
    else
      let cmd = substitute($VIMRUNTIME, ' ', '" ', '') . '\diff"'
    endif
  else
    let cmd = $VIMRUNTIME . '\diff'
  endif
  let cmd = substitute(cmd, '!', '\!', 'g')
  silent execute '!' . cmd . ' ' . opt . arg1 . ' ' . arg2 . ' > ' . arg3
  if exists('l:shxq_sav')
    let &shellxquote=l:shxq_sav
  endif
endfunction


"______________________________configurations___________________________________

"æ’ä»¶ç®¡ç†
call plug#begin('C:\tools\vim\vim90\Extensions')
Plug 'scrooloose/nerdtree'                                         " NerdTree
Plug 'ryanoasis/vim-devicons'                                      " ~ 
Plug 'Xuyuanp/nerdtree-git-plugin'                                 " ~
Plug 'skywind3000/vim-auto-popmenu'                                " è¡¥å…¨æ’ä»¶
Plug 'skywind3000/vim-dict'                                        " ~
Plug 'nathanaelkane/vim-indent-guides'                             " indent-rainbow
Plug 'jiangmiao/auto-pairs'                                        " æ‹¬å·åŒ¹é…
Plug 'Yggdroot/indentLine'                                         " æ‹¬å·å¯¹é½çº¿
Plug 'scrooloose/nerdcommenter'                                    " æ³¨é‡Š
Plug 'mhinz/vim-startify'                                          " é¦–é¡µç¾åŒ–
" Plug 'scrooloose/syntastic'                                        " é”™è¯¯æç¤º
Plug 'majutsushi/tagbar'                                           " ç±»å›¾
Plug 'junegunn/fzf', { 'do': { -> fzf#install() } }                " fzf
Plug 'junegunn/fzf.vim'                                            " ~
Plug 'iamcco/markdown-preview.nvim'                                " markdown preview
Plug 'iamcco/mathjax-support-for-mkdp'                             " ~
" >>> Notice <<< : if :markdown can not run, try ":call mkdp#util#install()"
Plug 'voldikss/vim-floaterm'                                       " æµ®çª—ç»ˆç«¯ 
Plug 'jbyuki/venn.nvim'                                            " ä½œå›¾ 
Plug 'Exafunction/codeium.vim'                                     " codeium 

" >>> ColorSchemes <<<
Plug 'tomasiser/vim-code-dark'                                     " codedark
Plug 'sainnhe/everforest'                                          " everforest

call plug#end()

"_______________________ Pre loader ___________________________
" è®¾ç½®é¢œè‰²ä¸»é¢˜:

colorscheme  codedark
syntax on 

" > New: 
" print_wb
" > available:
" >> Apply to Dark backgound:
" elflord
" evening
" darkblue
" >> Apply to Light backgound:
" habamax(when light backgound)

autocmd BufEnter * exec ":call PreLoader()"
func! PreLoader()
    set autoindent
    if &filetype == 'sql'
        exec ":set filetype=text"
        exec ":colorscheme evening"
        " exec ":call BracketRound()"
    elseif &filetype == 'cpp'
        exec ":syntax off"
    elseif &filetype == 'c'
        exec ":syntax off"
    elseif &filetype == 'python'
        exec ":syntax on"
        exec ":colorscheme desert"
    endif
endfunc

"______________________________________________________________






"_______________________FloatTerminal__________________________"
noremap <C-space> :call Floaterm()<CR>
tnoremap <silent> <C-space> <C-\><C-n>:FloatermToggle<CR>

" :w
def Floaterm()
    :FloatermToggle 
enddef 


" let g:floaterm_height=0.65
" let g:floaterm_with=0.95
" let g:floaterm_wintype=float
" let g:floaterm_autoclose=2
" nmap <F2> :FloatermNew --height=0.6 --width=0.85 --wintype=float --name=floaterm1 --position=bottom --autoclose=2 --cmd="C:\Users\DELL\AppData\Local\Microsoft\WindowsApps\Microsoft.PowerShell_8wekyb3d8bbwe\pwsh.exe"<CR>

nmap <F2> :FloatermNew --height=0.6 --width=0.85 --wintype=float --name=floaterm1 --position=bottom --autoclose=2 <CR>
"______________________________________________________________"



"_______________________Markdown Preview________________________
nmap <A-m> :MarkdownPreview<CR>
nmap <A-S-m> :MarkdownPreviewStop<CR>

let g:mkdp_auto_start = 0
" è®¾ç½®ä¸º 1 å¯ä»¥åœ¨æ‰“å¼€ markdown æ–‡ä»¶çš„æ—¶å€™è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨é¢„è§ˆï¼Œåªåœ¨æ‰“å¼€
" markdown æ–‡ä»¶çš„æ—¶å€™æ‰“å¼€ä¸€æ¬¡

let g:mkdp_auto_open = 0
" è®¾ç½®ä¸º 1 åœ¨ç¼–è¾‘ markdown çš„æ—¶å€™æ£€æŸ¥é¢„è§ˆçª—å£æ˜¯å¦å·²ç»æ‰“å¼€ï¼Œå¦åˆ™è‡ªåŠ¨æ‰“å¼€é¢„
" è§ˆçª—å£

let g:mkdp_auto_close = 1
" åœ¨åˆ‡æ¢ buffer çš„æ—¶å€™è‡ªåŠ¨å…³é—­é¢„è§ˆçª—å£ï¼Œè®¾ç½®ä¸º 0 åˆ™åœ¨åˆ‡æ¢ buffer çš„æ—¶å€™ä¸
" è‡ªåŠ¨å…³é—­é¢„è§ˆçª—å£

let g:mkdp_refresh_slow = 0
" è®¾ç½®ä¸º 1 åˆ™åªæœ‰åœ¨ä¿å­˜æ–‡ä»¶ï¼Œæˆ–é€€å‡ºæ’å…¥æ¨¡å¼çš„æ—¶å€™æ›´æ–°é¢„è§ˆï¼Œé»˜è®¤ä¸º 0ï¼Œå®æ—¶
" æ›´æ–°é¢„è§ˆ

let g:mkdp_command_for_global = 0
" è®¾ç½®ä¸º 1 åˆ™æ‰€æœ‰æ–‡ä»¶éƒ½å¯ä»¥ä½¿ç”¨ MarkdownPreview è¿›è¡Œé¢„è§ˆï¼Œé»˜è®¤åªæœ‰ markdown
" æ–‡ä»¶å¯ä»¥ä½¿ç”¨æ”¹å‘½ä»¤

let g:mkdp_theme = 'light' 
" è®¾ç½®ä¸»é¢˜'light' or 'dark'

let g:mkdp_browser = 'C:\Program Files (x86)\Microsoft\Edge\Application\msedge.exe'

"______________________________________________________________


"---------------------ç±»å›¾-------------------------
nmap <leader>tg :TagbarToggle<CR>

let g:tagbar_width=30
let g:tagbar_right=1
let g:tagbar_autoclose=1
"-------------------------------------------------


"---------------scrooloose/syntastic--------------

" let g:syntastic_mode_map = {'mode':'passive'}

set statusline+=%#warningmsg# 
set statusline+=%{SyntasticStatuslineFlag()}      
set statusline+=%*     
let g:syntastic_always_populate_loc_list = 0  
let g:syntastic_auto_loc_list = 0  
let g:syntastic_check_on_open = 0
let g:syntastic_check_on_wq = 0 
let g:syntastic_auto_jump = 1
"é«˜äº®é”™è¯¯
let g:syntastic_enable_highlighting=0
"è®¾ç½®errorå’Œwarningçš„æ ‡å¿— 
let g:syntastic_enable_signs = 1  
let g:syntastic_error_symbol= '>>'   " 'îª‡'   
let g:syntastic_warning_symbol= 'ï±'    " '!'  
"no-unused-args å¿½ç•¥ä¸ä½¿ç”¨çš„å‚æ•° 
"no-redefined å¿½ç•¥é‡å®šä¹‰ 
"no-max-line-length å¿½ç•¥æ¯è¡Œæœ€é•¿çš„æ£€æµ‹         
"ignore 542 551 å¿½ç•¥ifæ¡ä»¶çš„bodyä¸ºç©º(å¦‚...elseif ret == nil then endï¼Œthenå’Œendä¸­é—´æ²¡æœ‰è¯­å¥)ï¼›å¿½ç•¥ç©ºè¯­å¥(å¦‚;)ï¼Œå¦‚æœç”¨äº†;åˆ™æˆå¯¹å‡ºç°è¯¥è¯­æ³•æ£€æµ‹warning  
"æœ‰è¯­æ³•é”™è¯¯çš„ä¸€è¡Œå·¦ä¾§æ ä¼šæœ‰S&gt;æ ‡è¯†ï¼Œå…‰æ ‡ç§»åŠ¨åˆ°æ”¹è¡Œï¼Œvimä¸‹å‘ä¼šç»™å‡ºæç¤ºã€‚ä¿®æ”¹æ­£ç¡®åä¿å­˜ï¼Œåˆ™è¯¥'S&gt;'ä¼šæ¶ˆå¤±ã€‚  
let g:syntastic_python_checkers = ['python']    " ['python', 'flake8']
let g:syntastic_lua_checkers = ["/usr/bin/luac5.3.5", "luacheck"]     
let g:syntastic_lua_luacheck_args = "--codes --no-max-comment-line-length --ignore 542 551" 
"c
"let g:syntastic_c_compiler =['gcc', 'clang', 'make']       
"let g:syntastic_c_compiler_options ='-Wpedantic -g'   
let g:syntastic_c_compiler_options ='-std=gnu17'  
let g:syntastic_c_include_dirs=['/usr/include/']        
let g:syntastic_c_config_file='.syntastic_c_config_file'                      
"cpp         
let g:syntastic_cpp_include_dirs = ['/usr/include/'] 
let g:syntastic_cpp_remove_include_errors = 1 
let g:syntastic_cpp_check_header = 1 
let g:syntastic_cpp_checkers = ['gcc', 'clang']    
let g:syntastic_cpp_compiler = 'gcc'
let g:syntastic_cpp_compiler_options = '-std=c++17'  

"å…³é—­syntasticè¯­æ³•æ£€æŸ¥, é¼ æ ‡å¤åˆ¶ä»£ç æ—¶ç”¨åˆ°, é˜²æ­¢æŠŠé”™è¯¯æ ‡å¿—ç»™å¤åˆ¶äº†
nnoremap <silent> <Leader>ec :SyntasticToggleMode<CR>
function! ToggleErrors()
    let old_last_winnr = winnr('$')
    lclose
    if old_last_winnr == winnr('$')
        " Nothing was closed, open syntastic error location panel
        Errors
    endif
endfunction

"-------------------------------------------------

"______________________fzf________________________
let g:fzf_preview_window = []           "å…³é—­çª—å£é¢„è§ˆ
nmap zz :Files<CR>
"_________________________________________________


"---------------------indentLine--------------------
let g:indentLine_enabled = 1			" ä½¿æ’ä»¶ç”Ÿæ•ˆ
let g:indentLine_char = 'â”Š'				" è®¾ç½®ç¼©è¿›çº¿å­—ç¬¦ï¼Œä¹Ÿå¯ä»¥ä¸º '|', 'â”†', 'â”Š' ç­‰
let g:indentLine_conceallevel =  2		" ä½¿æ’ä»¶æ­£å¸¸è¿è¡Œ
"---------------------------------------------------

"--------------------nerdcommenter------------------
" ä½¿ç”¨ï¼š
" <leader>+cc : æ³¨é‡Š
" <leader>+cu : å–æ¶ˆ
" <leader>c<space>  åŠ ä¸Š/è§£å¼€æ³¨é‡Š, æ™ºèƒ½åˆ¤æ–­
" <leader>cy   å…ˆå¤åˆ¶, å†æ³¨è§£(på¯ä»¥è¿›è¡Œé»è´´)

"æ³¨é‡Šçš„æ—¶å€™è‡ªåŠ¨åŠ ä¸ªç©ºæ ¼, å¼ºè¿«ç—‡å¿…é…
let g:NERDSpaceDelims=1 
"---------------------------------------------------



"--------------------indent guides--------------"

" let g:indent_guides_enable_on_vim_startup = 1 "Open this Plugin at beginning"
map <F4> : IndentGuidesToggle<CR>


let g:indent_guides_auto_colors = 0
autocmd VimEnter,Colorscheme * :hi IndentGuidesOdd  guibg=green   ctermbg=8
autocmd VimEnter,Colorscheme * :hi IndentGuidesEven guibg=green   ctermbg=8

"-----------------------------------------------"


"-----------------------airline-------------------" (disabled)
" set laststatus=2    " å§‹ç»ˆæ˜¾ç¤ºçŠ¶æ€æ 
let g:airline#extensions#tabline#enabled = 1                " è®¾ç½®å¼€å¯tabæ ·å¼
let g:airline#extensions#tabline#formatter = 'jsformatter'  " è®¾ç½®é»˜è®¤tabæ æ ·å¼
"let g:airline#extensions#tabline#left_sep = ' '
"let g:airline#extensions#tabline#left_alt_sep = '|'
let g:airline_theme="ayu_mirage"
"understated
"base16_adwaita
"ayu_mirage
"apprentice
"ayu_dark
"angr"
"-------------------------------------------------"



"-----------------------NerdTree---------------------"
"F3 æ‰“å¼€Nerd tree
map <F3> :NERDTreeToggle<CR>

"å½“NERDTreeä¸ºå‰©ä¸‹çš„å”¯ä¸€çª—å£æ—¶è‡ªåŠ¨å…³é—­
autocmd bufenter * if (winnr("$") == 1 && exists("b:NERDTree") && b:NERDTree.isTabTree()) | q | endif
"è®¾ç½®æ ‘çš„æ˜¾ç¤ºå›¾æ ‡
let g:NERDTreeDirArrowExpandable = 'ï‘Š' 
let g:NERDTreeDirArrowCollapsible = 'ï‘‹'
let g:NERDTreeHidden=0     "ä¸æ˜¾ç¤ºéšè—æ–‡ä»¶

let g:NERDTreeNodeDelimiter="\u00a0"   " è§£å†³^Gé—®é¢˜
""""""""
let g:NERDTreeGitStatusShowIgnored = 1
let g:NERDTreeGitStatusIndicatorMapCustom = {
    \ "Modified"  : "âœ¹",
    \ "Staged"    : "âœš",
    \ "Untracked" : "âœ­",
    \ "Renamed"   : "âœ",
    \ "Unmerged"  : "â•",
    \ "Deleted"   : "âœ–",
    \ "Dirty"     : "âœ—",
    \ "Clean"     : "âœ”ï¸",
    \ 'Ignored'   : 'â˜’',
    \ "Unknown"   : "?"
    \ }
"----------------------------------------------------"



"-----------------------Compleation for txt------------------"
let g:apc_enable = 1

" https://zhuanlan.zhihu.com/p/349271041 "
" !!!! input <tab> to select"
" è®¾å®šéœ€è¦ç”Ÿæ•ˆçš„æ–‡ä»¶ç±»å‹ï¼Œå¦‚æœæ˜¯ "*" çš„è¯ï¼Œä»£è¡¨æ‰€æœ‰ç±»å‹
" è®¾ç½®ç‰¹å®šæ–‡ä»¶çš„æ¨¡æ¿{'text':1, 'markdown':1, 'php':1, "python":1, "cpp":1}
let g:apc_enable_ft = {"*":1}

" è®¾å®šä»å­—å…¸æ–‡ä»¶ä»¥åŠå½“å‰æ‰“å¼€çš„æ–‡ä»¶é‡Œæ”¶é›†è¡¥å…¨å•è¯ï¼Œè¯¦æƒ…çœ‹ ':help cpt'
set cpt=.,k,w,b

" ä¸è¦è‡ªåŠ¨é€‰ä¸­ç¬¬ä¸€ä¸ªé€‰é¡¹ã€‚
set completeopt=menu,menuone,noselect

" ç¦æ­¢åœ¨ä¸‹æ–¹æ˜¾ç¤ºä¸€äº›å•°å—¦çš„æç¤º
set shortmess+=c
"-------------------------------------------------------------"



"---------------------Rainbow------------------------" (Disabled)
let g:rainbow_active = 0

let g:rainbow_load_separately = [
    \ [ '*' , [['(', ')'], ['\[', '\]'], ['{', '}']] ],
    \ [ '*.tex' , [['(', ')'], ['\[', '\]']] ],
    \ [ '*.cpp' , [['(', ')'], ['\[', '\]'], ['{', '}']] ],
    \ [ '*.{html,htm}' , [['(', ')'], ['\[', '\]'], ['{', '}'], ['<\a[^>]*>', '</[^>]*>']] ],
    \ ]

let g:rainbow_guifgs = ['RoyalBlue3', 'DarkOrange3', 'DarkOrchid3', 'FireBrick']
let g:rainbow_ctermfgs = ['lightblue', 'lightgreen', 'yellow', 'red', 'magenta']
"-----------------------------------------------------"




"-----------------------maps---------------------"


" Algorithm Tempaltes 
source D:\CodeHub\CppRepos\Templates\cpp_algorithm_template.vim  
" source D:\CodeHub\CppRepos\Templates\Headers.vim
source D:\CodeHub\PythonRepos\Templates\python_algorithm_template.vim  


" reload auto load options such as wraps, snippets 
nmap >< :call ReloadAutoOptions()<CR>
func! ReloadAutoOptions()
    exec ":call FileWraps()"
    exec ":call MySnippets()"
endfunc


" add insents
autocmd BufEnter * exec ":call AddIndent()" 
func! AddIndent()
    if &filetype == 'c'
        exec ":vnoremap <C-/> I// <Esc>"
    elseif &filetype == 'cpp'
        exec ":vnoremap <C-/> I// <Esc>"
    elseif &filetype == 'python'
        exec ":vnoremap <C-/> I// <Esc>"
    elseif &filetype == 'java'
        exec ":vnoremap <C-/> I// <Esc>"
    elseif &filetype == 'rust'
        exec ":vnoremap <C-/> I// <Esc>"
    elseif &filetype == 'lua'
        exec ":vnoremap <C-/> I-- <Esc>"
    elseif &filetype == 'vim'
        exec ":vnoremap <C-/> I\" <Esc>"
    endif
endfunc


" å…³é—­æœç´¢åé«˜äº®
nmap mh :noh<CR>


" goback 
nmap gb u<C-r>
imap gb <esc>u<C-r>a


" é€€å‡ºvim
nmap JK :q<CR>
nmap !JK :q!<CR>

    
" é€€å‡ºinsert mode
imap jk <Esc>l
nmap qq <Esc>
vmap qq <Esc>


" å°†normal ä¸‹çš„ Ctrl + s --> ä¿å­˜
nmap <c-s> :w<Enter>
imap <c-s> <Esc>:w<Enter>i<Right>


" NORMALçŠ¶æ€ä¸‹å…¨é€‰
nmap <C-a> gg0vG$


" ç²˜è´´
imap <A-v> <Esc>"+Pa
nmap <A-v> "+p


" å¤åˆ¶
" > 1. å°†æ‰€æœ‰çš„å¤åˆ¶å…¨éƒ¨è½¬æ¢ä¸ºåˆ°ç³»ç»Ÿçš„ç²˜è´´æ¿
" augroup Yank
" autocmd!
" autocmd TextYankPost * :call system('clip ',@")
" augroup END
" > 2. maps(recommend)
vmap <A-c> y:call system('clip ',@")<Cr><Esc>
nmap <A-c> yy:call system('clip ',@")<Cr><Esc>


" close pseudo-code 
autocmd BufEnter * exec ":call CodeClose()"
func! CodeClose()
    set autoindent
    if &filetype == 'text'
        " exec ":inoremap {{{<CR> :EndFunc<Esc>6hi<CR><Esc>k$as<Esc>i<CR><Esc>xa<tab>"
        " exec ":inoremap {{<CR> then:EndIf<Esc>4hi<CR><Esc>k$as<Esc>i<CR><Esc>xa<tab>"
        " exec ":inoremap {<CR> do:EndLoop<Esc>6hi<CR><Esc>k$as<Esc>i<CR><Esc>xa<tab>"
    elseif &filetype == 'vim'
        exec ":inoremap func! func! endfunc<Esc>6hi<CR><Esc>k$a"
        exec ":inoremap function function endfunction<Esc>10hi<CR><Esc>k$a"
        exec ":inoremap if if endif<Esc>4hi<CR><Esc>k$a"
        exec ":inoremap for for endfor<Esc>5hi<CR><Esc>k$a"
        exec ":inoremap while while endwhile<Esc>7hi<CR><Esc>k$a"
    endif
endfunc


" insert sequense for code 
noremap <F5> :call InsertSeq(
func! InsertSeq(x)
    for i in range (a:x + 1)
        /^/ s//\=i+1 . '. '/ |let i=i+1
    endfor
endfunc


" wrap 
" Bug: can not wrap only one letter
autocmd BufEnter * exec ":call FileWraps()"
"
" > global wraps
vnoremap " hdi"<Esc>pla"<Esc>
vnoremap ' hdi'<Esc>pla'<esc>
vnoremap ( hdi(<Esc>pla)<esc>
vnoremap [ hdi[<Esc>pla]<esc>
vnoremap { hdi{<Esc>pla}<esc>
"
" > wraps for specific filetypes
func! FileWraps()
    if &filetype == 'python'
        exec ":vnoremap :\" hdi\"\"\"<Esc>pla\"\"\"<esc>"
    elseif &filetype == 'cpp'
        exec ":vnoremap \/* hdi\/*<Esc>pla*\/<esc>"
        exec ":vnoremap <> hdi<<esc>pla><esc>"
    elseif &filetype == 'markdown'
        exec ":vnoremap <> hdi<<esc>pla><esc>"
    elseif &filetype == 'vim'
        exec ":vnoremap <> hdi<<esc>pla><esc>"
    endif
endfunc


" select a word by space 
nmap <space> bve
nmap <S-space> evb
vmap <space> e
vmap <S-space> b


" select whole line
nmap ww ^v$h


" è¿è¡Œlf 
map ,fd :call RunLF()<CR> 
func! RunLF() 
    exec "!lf"
    " exec "!ranger"
endfunc


" >>>>>>>>>>>>>>>>>> Snippets <<<<<<<<<<<<<<<<<<<<<<< "
autocmd BufEnter * exec ":call MySnippets()"
func! MySnippets()
    if &filetype == 'cpp'
        " Insert: add snippet of endline; Normal: add snippet at rear of this line 
        " exec ":inoremap .endl std::cout << std::endl;"
        exec ":nnoremap .<Enter> $a std::cout << std::endl;<Esc>"
        " Insert: Print an arr with length arg
        " exec ":inoremap .prr for (const auto &x : arr) {std::cout << x << \" \";}"
        " Insert: printfline
        " exec ":inoremap .prl printf(\"\\n\");<esc>4hi"
    elseif &filetype == 'c'
        " exec ":inoremap .prl printf(\"\\n\");<esc>4hi"
        exec ":nnoremap .<CR> $a printf(\"\\n\");<Esc>"
    elseif &filetype == 'markdown'
        exec ":vnoremap <: hdi<-- !<esc>pla --><esc>"
        exec ":vnoremap <F hdi<font face=\"Times New Roman\" color=\"black\" size=4> <esc>pla <\/font><esc>7h"
        exec ":vnoremap <A hdi<p align=\"right\"> <esc>pla <\/p><esc>4h"
        exec ":vnoremap <M hdi<center> <esc>pla <\/center><esc>9h"       
    endif 
endfunc
" >>>>>>>>>>>>>>>>>> Snippets End <<<<<<<<<<<<<<<<<<<<<<< "




" >>>>>>>>>>>>>>>>>> Compile & Run <<<<<<<<<<<<<<<<<<<<<<< "
" ç¼–è¯‘ï¼ˆä¸è¿è¡Œï¼‰ compile all *.cpp
map <S-F12> :call CompileFile()<CR>
func! CompileFile()
    exec "w"
    if &filetype == 'c'
        exec "!gcc20 -g .\\*.c"
        " exec "!gcc20 -g %"
    elseif &filetype == 'cpp'
        exec "!g++20 -g .\\*.cpp"
        " exec "!g++20 -g %"
    elseif &filetype == 'rust'
        exec "!cargo build"
    elseif &filetype == 'java'
        exec "!javac %"
    endif 
endfunc


" ç¼–è¯‘ï¼ˆä¸è¿è¡Œï¼‰ compile all *.cpp
map <F12> :call CompileSingleFile()<CR>
func! CompileSingleFile()
    exec "w"
    if &filetype == 'c'
        exec "!gcc20 -g %"
    elseif &filetype == 'cpp'
        exec "!g++20 -g %"
    elseif &filetype == 'rust'
        exec "!cargo build"
    elseif &filetype == 'java'
        exec "!javac %"
    endif 
endfunc


"æŒ‰F10è¿è¡Œï¼ˆä¸ç¼–è¯‘ï¼‰run a.exe
map <F10> :call RunFile()<CR>
func! RunFile()
    if &filetype == 'c'
        exec "!a.exe"
    elseif &filetype == 'cpp'
        exec "!a.exe"
    elseif &filetype == 'rust'
        exec "!cargo run"
    elseif &filetype == 'python'
        exec "!python %"
    elseif &filetype == 'java'
        exec "!java %"
    endif 
endfunc



"è¾“å…¥<ctrl-b> compile & run current file 
map <C-b> :call CompileRunFile()<CR>
func! CompileRunFile()
    exec "w"
    if &filetype == 'c'
        exec "!gcc20 %"
        exec "!a.exe"
        exec "!del a.exe"
    elseif &filetype == 'cpp'
        exec "!g++20 %"
        exec "!a.exe"
        exec "!del a.exe"
    elseif &filetype == 'python'
        exec "!python %"
    elseif &filetype == 'rust'
        exec "!cargo run"
    elseif &filetype == 'java'
        exec "!java %"
    elseif &filetype == 'text'
        exec "!typst %"
    endif 
endfunc


" >>>>>>>>>>>>>>>>>>>>>>> Compile & Run End <<<<<<<<<<<<<<<<<<<


" normalä¸‹çª—å£è·³åŠ¨
nnoremap <A-h> <C-w>h
nnoremap <A-j> <C-w>j
nnoremap <A-k> <C-w>k
nnoremap <A-l> <C-w>l


" normal ç§»åŠ¨è¡Œ
nnoremap <C-j> ddp
nnoremap <C-k> ddkkp
" inoremap <C-j> <Esc>ddpa
" inoremap <C-k> <Esc>ddkkpa


" > cppcheck log  
" >> check current file -> ,mf
nmap ,mf :!check %<CR><CR>:split ErrorLog.txt<CR><C-w>r:resize 6<CR>ggddO[ğŸ˜€Made by HugoğŸ•]<Esc>:w<CR>:set readonly<CR>:<Esc>
" >> check whole directory -> ,md 
nmap ,md :!check ./<CR><CR>:split ErrorLog.txt<CR><C-w>r:resize 6<CR>ggddO[ğŸ˜€Made by HugoğŸ•]<Esc>:w<CR>:set readonly<CR>:<Esc>

"----------------------------------------"



"-----------------Sets-------------------"

" è‡ªåŠ¨æ’å…¥æ–‡ä»¶å¤´
autocmd BufNewFile * exec ":call SetTitle()"
func! SetTitle() 
    if &filetype == 'dosbatch'
        call setline(1,"@echo off")
        " call append(line("."),"#!/usr/bin/env python3")
        " call append(line(".")+1, "#-----------------------------------------------------------------------#")
        " call append(line(".")+2, "# File Name: ".expand("%"))
        " call append(line(".")+3, "# Author: Hugo Nelson")
        " call append(line(".")+4, "# Created Time: ".strftime("%c"))
        " call append(line(".")+5, "#-----------------------------------------------------------------------#")
        " call append(line(".")+6, "")
    elseif &filetype == 'text'
        call setline(1,",                    -*- FileType : None -*-")
        call append(line("."),"+----------------------------------------------------------------------+")
        call append(line(".")+1, "| File Name: ".expand("%"))
        call append(line(".")+2, "| Author: Hugo Nelson")
        call append(line(".")+3, "| Created Time: ".strftime("%c"))
        call append(line(".")+4, "+----------------------------------------------------------------------+")
        call append(line(".")+5, "")
    elseif &filetype == 'markdown'
        call setline(1,"<font face='Pointfree Nerd Font' size=4>")
        call append(line("."),"")
        call append(line(".")+1, "# ".expand("%"))
        call append(line(".")+2, "<p align='right'> --by hugo, ".strftime("%c"))
        call append(line(".")+3, "</p>")
        call append(line(".")+4, "")
        call append(line(".")+5, "${toc}")
        call append(line(".")+6, "")
        call append(line(".")+7, "---")
        call append(line(".")+8, "")
    endif
    " normal Go 
endfunc


"ä¿®æ”¹æ³¨é‡Šé¢œè‰²
" :highlight Comment ctermfg=green guifg=green 


"è®¾ç½®leaderå»º
let mapleader=","

"ç²˜è´´å‰æŒ‰F9é˜²æ­¢æ ¼å¼æ··ä¹±
set pastetoggle=<F9>


" é«˜äº®æ˜¾ç¤ºå¯¹åº”çš„æ‹¬å·
set showmatch


" å¯¹åº”æ‹¬å·é«˜äº®çš„æ—¶é—´ï¼ˆå•ä½æ˜¯ååˆ†ä¹‹ä¸€ç§’ï¼‰
" set matchtime=5


" åœ¨çŠ¶æ€è¡Œæ˜¾ç¤ºç›®å‰æ‰€æ‰§è¡Œçš„å‘½ä»¤ï¼Œæœªå®Œæˆçš„æŒ‡ä»¤ç‰‡æ®µäº¦ä¼šæ˜¾ç¤ºå‡ºæ¥
set showcmd


" å‘½ä»¤è¡Œï¼ˆåœ¨çŠ¶æ€è¡Œï¼‰çš„é«˜åº¦ï¼Œé»˜è®¤ä¸º1,è¿™é‡Œæ˜¯2
set cmdheight=2



" æœç´¢é€å­—ç¬¦é«˜äº®
set hlsearch
set incsearch


" è®¾ç½®ä»£ç æŠ˜å 
"set nofoldenable             " å¯åŠ¨ vim æ—¶å…³é—­æŠ˜å ä»£ç 
"set foldmethod=indent        " è®¾ç½®è¯­æ³•æŠ˜å 
"setlocal foldlevel=99        " è®¾ç½®æŠ˜å å±‚æ•°
"nnoremap <space> za          " ç”¨ç©ºæ ¼é”®æ¥å¼€å…³æŠ˜å 


"æ˜¾ç¤ºè¡Œæ•°
set number
set relativenumber


"è§„å®štabçš„å¤§å°,åŠæ›¿æ¢tabä¸ºç©ºæ ¼
set tabstop=4
set expandtab


" ç»Ÿä¸€ç¼©è¿›ä¸º4
set softtabstop=4
set shiftwidth=4


"æœç´¢å¿½ç•¥å¤§å°å†™
set ignorecase


"æ˜¾ç¤ºçŠ¶æ€æ 
set laststatus=2


"çŠ¶æ€æ 
" set statusline=%F%m%r%h%w%=(%{&ff}/%Y)\ (row\ %l,\ col\ %c)
" set statusline+=%{&ff}  "æ˜¾ç¤ºæ–‡ä»¶æ ¼å¼ç±»å‹
" set statusline+=%h  "å¸®åŠ©æ–‡ä»¶æ ‡è¯†
" set statusline+=%m  "å¯ç¼–è¾‘æ–‡ä»¶æ ‡è¯†
" set statusline+=%r  "åªè¯»æ–‡ä»¶æ ‡è¯†
" set statusline+=%y  "æ–‡ä»¶ç±»å‹
" set statusline+=%c  "å…‰æ ‡æ‰€åœ¨åˆ—æ•°
" set statusline+=%l/%L  "å…‰æ ‡æ‰€åœ¨è¡Œæ•°/æ€»è¡Œæ•°
" set statusline+=\ %P  "å…‰æ ‡æ‰€åœ¨ä½ç½®å æ€»æ–‡ä»¶ç™¾åˆ†æ¯”
"
" New version
set statusline=%1*\ï‡‰\ ->\ %<%.50F\                                    "æ˜¾ç¤ºæ–‡ä»¶åå’Œæ–‡ä»¶è·¯å¾„ (%<åº”è¯¥å¯ä»¥å»æ‰)
set statusline+=%=%2*\%y%m%r%h%w\ %*                                  "æ˜¾ç¤ºæ–‡ä»¶ç±»å‹åŠæ–‡ä»¶çŠ¶æ€
" set statusline+=%3*\%{&ff}\ \ encoding:[%{&fenc}]\ %*               "æ˜¾ç¤ºæ–‡ä»¶ç¼–ç ç±»å‹
set statusline+=%3*\î®™\ ->\ Hugo\ \ î­©\ ->\ %{&fenc}\ %*                "æ˜¾ç¤ºæ–‡ä»¶ç¼–ç ç±»å‹
set statusline+=%4*\ ï’ \ ->\ Row:\ %l\ of\ %L,\ Col:\ %c\ \ \ %*           "æ˜¾ç¤ºå…‰æ ‡æ‰€åœ¨è¡Œå’Œåˆ—
" set statusline+=%5*\îª¤\ ->%3p%%\%*                                   "æ˜¾ç¤ºå…‰æ ‡å‰æ–‡æœ¬æ‰€å æ€»æ–‡æœ¬çš„æ¯”ä¾‹
set statusline+=%5*\î¯ \ ->%3p%%\%*                                   "æ˜¾ç¤ºå…‰æ ‡å‰æ–‡æœ¬æ‰€å æ€»æ–‡æœ¬çš„æ¯”ä¾‹
hi User1 cterm=none ctermfg=green ctermbg=0                           "ç¬¬ä¸€ä¸ªçŠ¶æ€ä¿¡æ¯çš„é¢œè‰²
hi User2 cterm=none ctermfg=223 ctermbg=0
hi User3 cterm=none ctermfg=169 ctermbg=0
hi User4 cterm=none ctermfg=100 ctermbg=0
hi User5 cterm=none ctermfg=223 ctermbg=0


"èƒ½å¤Ÿè‡ªåŠ¨è¡¥å…¨æ˜¾ç¤ºå‘½ä»¤è¡Œè¯­å¥ï¼Œå¹¶å¯åˆ©ç”¨â€Tabâ€é”®è¿›è¡Œç›¸åº”çš„é€‰æ‹©ã€‚
set wildmenu


"æ ¹æ®æ–‡ä»¶ç±»å‹ï¼ŒåŠ è½½ç¼©è¿›æ–‡ä»¶
filetype indent on  

set nobackup       "ä¸ç”Ÿæˆå¤‡ä»½æ–‡ä»¶ filename~
"set noswapfile     "ä¸ç”Ÿæˆäº¤æ¢æ–‡ä»¶ .filename.swp
set noundofile     "ä¸ç”Ÿæˆundoå¤‡ä»½ .filename.un~

"set backup         "ç”Ÿæˆå¤‡ä»½æ–‡ä»¶ filename~
"set swapfile       "ç”Ÿæˆäº¤æ¢æ–‡ä»¶ .filename.swp
"set undofile       "ç”Ÿæˆundoå¤‡ä»½ .filename.un~


" å…³é—­é”™è¯¯ä¿¡æ¯å“é“ƒ
set noeb


" ç½®ç©ºé”™è¯¯é“ƒå£°çš„ç»ˆç«¯ä»£ç 
set vb t_vb= 


" æ‰“å¼€çŠ¶æ€æ æ ‡å°º
set ruler 


"è¾“å…¥çš„å‘½ä»¤æ˜¾ç¤ºå‡ºæ¥ï¼Œçœ‹çš„æ¸…æ¥šäº›
set showcmd


"Mode Settings:shape of Cursor
let &t_SI.="\e[5 q" "SI = INSERT mode
let &t_SR.="\e[6 q" "SR = REPLACE mode
let &t_EI.="\e[1 q" "EI = NORMAL mode (ELSE)
"Cursor settings:
"  1 -> blinking block
"  2 -> solid block
"  3 -> blinking underscore
"  4 -> solid underscore
"  5 -> blinking vertical bar
"  6 -> solid vertical bar
"
" let &t_SI = "\<Esc>]50;CursorShape=1\x7"
" let &t_SR = "\<Esc>]50;CursorShape=2\x7"
" let &t_EI = "\<Esc>]50;CursorShape=0\x7"


"è®¾ç½®è‡ªåŠ¨æ¢è¡Œçš„æœ€å¤§å­—ç¬¦æ•°: 
autocmd BufEnter * exec ":set textwidth=10000000"
"------------------End Set ----------------------------"

